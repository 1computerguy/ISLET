#!/usr/bin/env bash
# Global Variables
CONFIG=LOCATION
COUNT=0
if [ -f $CONFIG ]; then
	source $CONFIG
	source $LIBZK
else
	echo "Error: ${CONFIG:-config} or ${LIBZK:-libzk} not found!"
	exit 1
fi

clear

if [ -d $CONFIG_DIR ]
then
        cd $CONFIG_DIR
else
        echo "Error: $CONFIG_DIR doesn't exist!"
        exit 1
fi


cat <<"EOF"
Welcome to Zookeeper!

==============================================

   Zoo Keeper: A Linux-based Training System

   Web: https://github.com/jonschipp/zookeeper

==============================================

A place to try out Linux software.

EOF

notice "\t\t\t\tAvailable configurations:\n"
printf '\t\t\t%-30s %-7s %-30s\n' "${BF}$SPACER1${N}" "|" "${BF}$SPACER1${N}"
for config in *.conf
do
        source $config
        printf '\t\t\t%-30s %-7s %-30s\n' "${WF}$config${N}" "|" "${U}$DESCRIPTION${N}"
done

while test $COUNT -lt $FAILURE_COUNT
do
        read -r -p "Choice: " CONFIGURATION
        if [ -f "$CONFIG_DIR/$CONFIGURATION" ]; then
                break
        else
                echo "Invalid choice!"
        fi
        let COUNT++

        if [ $COUNT -ge $FAILURE_COUNT ]; then
                log "Too many failed attempts!"
        fi
done

####################################################
exec timeout 1m "$LAUNCH_CONTAINER" "$CONFIGURATION"
####################################################
